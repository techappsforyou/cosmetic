<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Beauty Bundle</title>
<style>
  :root{
    --bg:#f6f4fb; --card:#ffffff; --text:#27243a; --muted:#7b7890;
    --brand:#e91e63; --brand-2:#ff80ab; --accent:#00c853; --danger:#ff3d71;
    --radius:18px; --shadow:0 8px 24px rgba(20,16,40,.08);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial}

  /* Header */
  .topbar{
    position:sticky;top:0;z-index:20;background:#fff;
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 16px;border-bottom:1px solid #eee
  }
  .spacer{width:44px}
  .brand{
    position:absolute;left:50%;transform:translateX(-50%);
    font-weight:800;letter-spacing:.3px;
    background:linear-gradient(90deg,var(--brand),var(--brand-2));
    -webkit-background-clip:text;background-clip:text;color:transparent;font-size:18px
  }
  .cart-btn{
    position:relative;border:none;background:#fff;padding:10px 12px;border-radius:14px;
    box-shadow:var(--shadow);display:flex;align-items:center;gap:8px;cursor:pointer
  }
  .cart-icon,.mini-cart,.x-icon{
    width:22px;height:22px;display:inline-block;background:#ff5fa3;mask:center/contain no-repeat
  }
  .cart-icon{
    mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2a1 1 0 1 1 0-2h3a1 1 0 0 1 .96.73L9.38 5H21a1 1 0 0 1 .97 1.24l-2 8A1 1 0 0 1 19 15H9a1 1 0 0 1-.97-.76L6.16 6H4a1 1 0 1 1 0-2h1.18A3 3 0 0 1 8 2h0a1 1 0 0 1 1 1v1zM9.5 17a1.75 1.75 0 1 0 0 3.5A1.75 1.75 0 0 0 9.5 17zm8 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5z"/></svg>')
  }
  .badge{
    position:absolute;top:-6px;right:-6px;min-width:18px;height:18px;padding:0 5px;border-radius:9px;
    background:#ff3d71;color:#fff;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center
  }

  .container{max-width:980px;margin:10px auto 60px;padding:0 12px}
  .title{font-size:20px;font-weight:700;margin:8px 2px 14px;color:#3a3560}

  /* Grid */
  .grid{display:grid;gap:14px;grid-template-columns:repeat(2,minmax(0,1fr))}
  @media(min-width:720px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}
  .card{
    position:relative;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:12px;cursor:pointer;
    transition:transform .12s ease,box-shadow .12s ease,outline .12s ease;outline:2px solid transparent
  }
  .card:hover{transform:translateY(-2px);box-shadow:0 12px 28px rgba(20,16,40,.12)}
  .thumb{width:100%;aspect-ratio:1/1;object-fit:contain;border-radius:14px;background:linear-gradient(180deg,#fff,#fff5fb)}
  .meta{margin-top:8px;display:flex;align-items:center;justify-content:space-between}
  .mini-cart{width:20px;height:20px;background:#ff9ec3;mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2a1 1 0 1 1 0-2h3a1 1 0 0 1 .96.73L9.38 5H21a1 1 0 0 1 .97 1.24l-2 8A1 1 0 0 1 19 15H9a1 1 0 0 1-.97-.76L6.16 6H4a1 1 0 1 1 0-2h1.18A3 3 0 0 1 8 2h0a1 1 0 0 1 1 1v1zM9.5 17a1.75 1.75 0 1 0 0 3.5A1.75 1.75 0 0 0 9.5 17zm8 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5z"/></svg>');opacity:.6}
  .picked{outline:2px solid var(--brand);box-shadow:0 0 0 6px rgba(233,30,99,.12),var(--shadow)}
  .check{position:absolute;top:10px;right:10px;width:22px;height:22px;background:#fff;border-radius:50%;display:grid;place-items:center;box-shadow:0 6px 16px rgba(0,0,0,.12);opacity:0;transform:scale(.8);transition:all .12s ease}
  .card.picked .check{opacity:1;transform:scale(1)}
  .check::after{content:"";width:14px;height:14px;border-radius:50%;background:#00c853;mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>') center/contain no-repeat}

  /* Rating display */
  .rating{display:flex;align-items:center;gap:8px}
  .stars{position:relative;display:inline-block;color:#e5e5ef}
  .stars::before{content:"★★★★★";letter-spacing:1px}
  .stars::after{
    content:"★★★★★";letter-spacing:1px;position:absolute;left:0;top:0;
    width:var(--p,90%);overflow:hidden;color:#ffb400
  }
  .score{font-weight:700;color:#2f2a55;font-size:14px}

  /* Cart */
  .drawer{position:fixed;inset:0;background:rgba(17,12,28,.38);display:none;align-items:flex-end;z-index:40}
  .drawer.open{display:flex}
  .sheet{width:100%;max-height:80vh;background:#fff;border-top-left-radius:18px;border-top-right-radius:18px;padding:16px;box-shadow:0 -10px 30px rgba(0,0,0,.2);overflow:auto}
  .sheet h3{margin:2px 0 12px;font-size:18px}
  .cart-list{display:grid;gap:10px;margin-bottom:14px}
  .cart-item{display:flex;gap:10px;align-items:center;background:#fff6fa;border-radius:14px;padding:10px 12px}
  .cart-item img{width:56px;height:56px;object-fit:contain;background:#fff;border-radius:12px}
  .cart-name{font-weight:700}
  .remove{margin-left:auto;border:none;width:32px;height:32px;border-radius:10px;cursor:pointer;background:#ffe8ea;display:grid;place-items:center}
  .x-icon{background:#d32f2f;mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3z"/></svg>')}

  .primary{width:100%;border:none;background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#fff;font-weight:800;padding:14px 16px;border-radius:14px;cursor:pointer;box-shadow:var(--shadow)}
  .empty{padding:24px;text-align:center;color:var(--muted)}

  /* Modal with animated SVG check */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(17,12,28,.38);z-index:50}
  .modal.show{display:flex}
  .card-modal{
    width:min(420px,92vw);background:#fff;padding:22px;border-radius:18px;text-align:center;box-shadow:var(--shadow);
    animation:pop .18s ease
  }
  @keyframes pop{from{transform:scale(.96);opacity:.6}to{transform:scale(1);opacity:1}}

  .circle{
    width:90px;height:90px;border-radius:50%;background:#e8f5e9;
    display:flex;align-items:center;justify-content:center;margin:8px auto 12px;
    opacity:0; transform:scale(.9); transition:opacity .35s ease, transform .35s ease
  }
  .modal.show .circle{opacity:1; transform:scale(1)}

  svg{width:60px;height:60px;stroke:#00c853;stroke-width:6;fill:none;stroke-linecap:round;stroke-linejoin:round}
  .checkmark{
    stroke-dasharray:50;
    stroke-dashoffset:50;
    animation:draw .8s ease forwards .15s;
  }
  @keyframes draw{to{stroke-dashoffset:0}}

  .ok{margin-top:8px;border:none;background:#eee;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}

  /* Error overlay (debug) */
  #err{
    position:fixed;inset:auto 12px 12px 12px;z-index:9999;background:#ffecec;color:#a40000;
    border:1px solid #ffb3b3;border-radius:10px;padding:10px 12px;display:none;font:13px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    white-space:pre-wrap; box-shadow:0 6px 18px rgba(0,0,0,.08);
  }
</style>
</head>
<body>

<header class="topbar">
  <div class="spacer"></div>
  <div class="brand">Beauty Bundle</div>
  <button id="openCart" class="cart-btn" aria-label="Open cart">
    <span class="cart-icon"></span><span>Cart</span><span id="badge" class="badge">0</span>
  </button>
</header>

<main class="container">
  <div class="title">Pick your beauty kits</div>
  <section id="grid" class="grid"></section>
</main>

<!-- Cart drawer -->
<div id="drawer" class="drawer" role="dialog" aria-modal="true">
  <div class="sheet">
    <h3>Your Cart</h3>
    <div id="cartList" class="cart-list"></div>
    <button id="checkout" class="primary">Checkout</button>
  </div>
</div>

<!-- Modal with animated SVG check -->
<div id="modal" class="modal" role="dialog" aria-modal="true">
  <div class="card-modal">
    <div class="circle" aria-hidden="true">
      <svg viewBox="0 0 24 24">
        <path class="checkmark" d="M5 13l4 4L19 7"/>
      </svg>
    </div>
    <button class="ok" id="okBtn">Done</button>
  </div>
</div>

<!-- Error overlay -->
<pre id="err"></pre>

<script>
/* ====== Simple error overlay ====== */
(function(){
  const box = document.getElementById('err');
  window.addEventListener('error', function(ev){
    box.style.display='block';
    box.textContent = 'Error: ' + ev.message + '\\n' + (ev.filename||'') + ':' + (ev.lineno||'') + ':' + (ev.colno||'');
  });
  window.addEventListener('unhandledrejection', function(ev){
    box.style.display='block';
    box.textContent = 'Unhandled promise rejection: ' + (ev.reason && ev.reason.message ? ev.reason.message : String(ev.reason));
  });
})();

/* ====== Products (8 kits) ======
   Cards show rating (4.4–4.9) with stars; no titles.
*/
const PRODUCTS = [
  // your first 4 images
  { id:'kit-1', src:'https://i.ibb.co/kgfMGbgg/79d241cb6e1dd5aab820d09ea067f4e0.jpg', rating:4.9 },
  { id:'kit-2', src:'https://i.ibb.co/j9z79SvH/cosmetics.jpg', rating:4.7 },
  { id:'kit-3', src:'https://i.ibb.co/6LX6GJk/650823cdd9c4e5727f69e3e6-full-beauty-cosmetics-set-27pcs-makeup.jpg', rating:4.6 },
  { id:'kit-4', src:'https://i.ibb.co/q3JYT3wD/png-klev-club-p-kosmetika-png-19.png', rating:4.8 },

  // replaced 4 assistant-added images with your new links
  { id:'kit-5', src:'https://i.ibb.co/XkGBkwKp/what-is-the-difference-between-makeup-and-cosmetics.webp', rating:4.5 },
  { id:'kit-6', src:'https://i.ibb.co/Q1KMXrz/color-retention-HD-min-scaled.jpg', rating:4.4 },
  { id:'kit-7', src:'https://i.ibb.co/21vZFhT5/populjarnye-eclat.jpg', rating:4.8 },
  { id:'kit-8', src:'https://i.ibb.co/nMRydVCw/c2266c582a2322972870c83f7f48c9ecda6501f7-original.jpg', rating:4.7 },
];

/* ====== State & elements ====== */
const picked = new Map();
const grid = document.getElementById('grid');
const badge = document.getElementById('badge');
const drawer = document.getElementById('drawer');
const cartList = document.getElementById('cartList');
const openCartBtn = document.getElementById('openCart');
const checkoutBtn = document.getElementById('checkout');
const modal = document.getElementById('modal');
const okBtn = document.getElementById('okBtn');

/* ====== Helpers ====== */
function ratingToPercent(r){ return Math.max(0, Math.min(100, (r/5)*100)); }

/* ====== Cards ====== */
function makeCard(p){
  const card = document.createElement('article');
  card.className = 'card';
  card.tabIndex = 0;
  card.setAttribute('data-id', p.id);
  card.innerHTML =
    '<img class="thumb" src="'+p.src+'" alt="Cosmetics set">'+
    '<div class="meta">'+
      '<div class="rating">'+
        '<span class="stars" style="--p:'+ratingToPercent(p.rating)+'%"></span>'+
        '<span class="score">'+p.rating.toFixed(1)+'</span>'+
      '</div>'+
      '<span class="mini-cart" aria-hidden="true"></span>'+
    '</div>'+
    '<div class="check" aria-hidden="true"></div>';

  card.addEventListener('click', function(){ togglePick(p, card); });
  card.addEventListener('keydown', function(e){
    if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); togglePick(p, card); }
  });
  return card;
}
PRODUCTS.forEach(p => grid.appendChild(makeCard(p)));

function togglePick(p, card){
  if(picked.has(p.id)){
    picked.delete(p.id);
    card.classList.remove('picked');
  }else{
    picked.set(p.id, p);
    card.classList.add('picked');
  }
  badge.textContent = String(picked.size);
}

/* ====== Cart drawer ====== */
function openDrawer(){ renderCart(); drawer.classList.add('open'); }
function closeDrawer(){ drawer.classList.remove('open'); }
drawer.addEventListener('click', e => { if(e.target === drawer) closeDrawer(); });
openCartBtn.addEventListener('click', openDrawer);

function renderCart(){
  cartList.innerHTML = '';
  if(picked.size === 0){
    cartList.innerHTML = '<div class="empty">Your cart is empty.</div>';
    checkoutBtn.disabled = true; checkoutBtn.style.opacity = .6; return;
  }
  checkoutBtn.disabled = false; checkoutBtn.style.opacity = 1;

  Array.from(picked.values()).forEach(function(p){
    const row = document.createElement('div');
    row.className = 'cart-item';
    row.innerHTML =
      '<img src="'+p.src+'" alt="Selected kit">'+
      '<div><div class="cart-name">Beauty kit</div>'+
      '<div class="rating"><span class="stars" style="--p:'+ratingToPercent(p.rating)+'%"></span><span class="score">'+p.rating.toFixed(1)+'</span></div></div>'+
      '<button class="remove" title="Remove"><span class="x-icon" aria-hidden="true"></span></button>';

    row.querySelector('.remove').addEventListener('click', function(){
      picked.delete(p.id);
      const sel = '[data-id="' + p.id.replace(/"/g,'\\"') + '"]';
      const card = grid.querySelector(sel);
      if(card) card.classList.remove('picked');
      badge.textContent = String(picked.size);
      renderCart();
    });

    cartList.appendChild(row);
  });
}

/* ====== Checkout -> Modal with animated check ====== */
checkoutBtn.addEventListener('click', function(){
  if(picked.size === 0) return;
  closeDrawer();
  modal.classList.add('show');
});

okBtn.addEventListener('click', function(){
  modal.classList.remove('show');
  picked.clear(); badge.textContent = '0';
  Array.from(grid.querySelectorAll('.card.picked')).forEach(el => el.classList.remove('picked'));
});

/* ESC to close overlays */
window.addEventListener('keydown', function(e){
  if(e.key === 'Escape'){
    if(modal.classList.contains('show')) modal.classList.remove('show');
    else if(drawer.classList.contains('open')) closeDrawer();
  }
});
</script>
</body>
</html>

